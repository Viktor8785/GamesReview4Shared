import{gamesData}from"./games-data.js";const pageBody=document.querySelector(".page__body"),watchButton=document.querySelector("#wish-button"),ratingButton=document.querySelector("#rating-button"),itemTemplate=document.querySelector("#item-template").content.querySelector(".list__item"),gamesTitle=document.querySelector(".list__title"),gamesList=document.querySelector(".list__list");pageBody.style.minHeight=window.innerHeight+"px";let urlParams=new URLSearchParams(window.location.search),param2=urlParams.get("param2"),param=urlParams.get("param"),isSorted=!1,gamesFiltered=[];param2?(gamesFiltered=getSearchGames(),gamesTitle.textContent="Search Games"):"watch"==param?(watchButton.classList.add("menu__item--active"),gamesFiltered=getWatchGames(),gamesTitle.textContent="Wish List"):(gamesTitle.textContent=param,gamesFiltered=getFilteredGames());let gamesFilteredOrigin=[];function createItems(){let e=gamesFiltered.length;if(e>0)for(let t=0;t<e;t++){const e=itemTemplate.cloneNode(!0);e.addEventListener("click",(()=>{e.querySelector(".list__link").href="game.html?param="+gamesFiltered[t].id,"watch"==param&&(e.querySelector(".list__link").href="game.html?param="+gamesFiltered[t].id+"&param2=watch")})),e.querySelector(".list__genre").textContent=gamesFiltered[t].genre,e.querySelector(".list__img").src=gamesFiltered[t].imgIcon,e.querySelector(".list__img").alt=gamesFiltered[t].name,e.querySelector(".list__img-raiting").textContent=gamesFiltered[t].rating,e.querySelector(".list__name").textContent=gamesFiltered[t].name,gamesList.appendChild(e)}}function getFilteredGames(){return gamesData.filter((e=>{if(e.genre==param)return!0}))}function getWatchGames(){let e=localStorage.getItem("wish"),t=[];if(e&&e.length>0)for(let a=0;a<e.length/3;a++){let r=3*a,i=e.slice(r,r+2);gamesData.forEach((e=>{e.id==i&&(t[a]=e)}))}return t}function getSearchGames(){return gamesData.filter((e=>{if(e.name.toLowerCase().includes(param.toLowerCase()))return!0}))}Object.assign(gamesFilteredOrigin,gamesFiltered),"sorted"===localStorage.getItem("sort1")&&(isSorted=!0,ratingButton.classList.toggle("menu__item--active"),gamesFiltered.sort(((e,t)=>t.rating-e.rating))),createItems(),watchButton.addEventListener("click",(()=>{watchButton.href="games.html?param=watch"})),ratingButton.addEventListener("click",(()=>{isSorted?(isSorted=!1,localStorage.setItem("sort1","")):(isSorted=!0,localStorage.setItem("sort1","sorted")),ratingButton.classList.toggle("menu__item--active");for(let e=gamesList.children.length-1;e>=0;e--)gamesList.children[e].parentElement.removeChild(gamesList.children[e]);isSorted?gamesFiltered.sort(((e,t)=>t.rating-e.rating)):gamesFiltered=gamesFilteredOrigin,createItems()}));